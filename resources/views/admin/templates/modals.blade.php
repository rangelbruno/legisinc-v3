<!--begin::Modal - Como Usar Templates-->
<div class="modal fade" id="kt_modal_help_templates" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered mw-900px">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="fw-bold">Sistema de Templates Universal</h2>
                <div class="btn btn-icon btn-sm btn-active-icon-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body py-10 px-lg-17">
                <div class="row">
                    <div class="col-12">
                        <div class="mb-10">
                            <h3 class="text-gray-900 fw-bold fs-4 mb-5">
                                <i class="ki-duotone ki-rocket fs-2 text-primary me-2">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                </i>
                                Revolucionário: Template Único Universal
                            </h3>
                            <div class="text-gray-700 fs-6 mb-5">
                                O <strong>Template Universal</strong> é uma inovação que substitui os 23 templates específicos 
                                por um modelo único inteligente que se adapta automaticamente a qualquer tipo de proposição.
                            </div>
                            
                            <div class="alert alert-success d-flex align-items-center mb-6">
                                <i class="ki-duotone ki-shield-tick fs-2 text-success me-4">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                    <span class="path3"></span>
                                </i>
                                <div>
                                    <div class="fw-bold fs-6">Benefícios Principais</div>
                                    <div class="fs-7 text-muted">Manutenção 95% mais simples • Adaptação automática • Conformidade legal garantida</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-10">
                            <h4 class="text-gray-900 fw-bold fs-5 mb-4">
                                <i class="ki-duotone ki-setting-2 fs-3 text-success me-2">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                </i>
                                Como Funciona a Adaptação Automática
                            </h4>
                            
                            <div class="row g-5">
                                <div class="col-md-6">
                                    <div class="card border border-dashed border-primary">
                                        <div class="card-body p-4">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="symbol symbol-45px me-3">
                                                    <span class="symbol-label bg-light-primary">
                                                        <i class="ki-duotone ki-document-2 fs-3 text-primary">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                        </i>
                                                    </span>
                                                </div>
                                                <div>
                                                    <div class="fw-bold text-gray-900 fs-6">Projeto de Lei</div>
                                                    <div class="text-muted fs-7">Adaptação automática</div>
                                                </div>
                                            </div>
                                            <ul class="list-unstyled text-muted fs-7 mb-0">
                                                <li class="mb-1">✅ Preâmbulo: "A CÂMARA MUNICIPAL DECRETA:"</li>
                                                <li class="mb-1">✅ Estrutura articulada (Art. 1º, 2º...)</li>
                                                <li class="mb-1">✅ Cláusula de vigência automática</li>
                                                <li class="mb-1">✅ Formatação LC 95/1998</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card border border-dashed border-warning">
                                        <div class="card-body p-4">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="symbol symbol-45px me-3">
                                                    <span class="symbol-label bg-light-warning">
                                                        <i class="ki-duotone ki-scroll fs-3 text-warning">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                            <span class="path3"></span>
                                                        </i>
                                                    </span>
                                                </div>
                                                <div>
                                                    <div class="fw-bold text-gray-900 fs-6">Moção</div>
                                                    <div class="text-muted fs-7">Adaptação automática</div>
                                                </div>
                                            </div>
                                            <ul class="list-unstyled text-muted fs-7 mb-0">
                                                <li class="mb-1">✅ Preâmbulo: "A Câmara Municipal manifesta:"</li>
                                                <li class="mb-1">✅ Seção de considerandos</li>
                                                <li class="mb-1">✅ Resolução final padrão</li>
                                                <li class="mb-1">✅ Formatação específica</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card border border-dashed border-info">
                                        <div class="card-body p-4">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="symbol symbol-45px me-3">
                                                    <span class="symbol-label bg-light-info">
                                                        <i class="ki-duotone ki-questionnaire-tablet fs-3 text-info">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                        </i>
                                                    </span>
                                                </div>
                                                <div>
                                                    <div class="fw-bold text-gray-900 fs-6">Requerimento</div>
                                                    <div class="text-muted fs-7">Adaptação automática</div>
                                                </div>
                                            </div>
                                            <ul class="list-unstyled text-muted fs-7 mb-0">
                                                <li class="mb-1">✅ Preâmbulo: "Requeiro, nos termos regimentais:"</li>
                                                <li class="mb-1">✅ Lista numerada (I, II, III)</li>
                                                <li class="mb-1">✅ Justificativa opcional</li>
                                                <li class="mb-1">✅ Formatação regimental</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card border border-dashed border-success">
                                        <div class="card-body p-4">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="symbol symbol-45px me-3">
                                                    <span class="symbol-label bg-light-success">
                                                        <i class="ki-duotone ki-message-text-2 fs-3 text-success">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                            <span class="path3"></span>
                                                        </i>
                                                    </span>
                                                </div>
                                                <div>
                                                    <div class="fw-bold text-gray-900 fs-6">Indicação</div>
                                                    <div class="text-muted fs-7">Adaptação automática</div>
                                                </div>
                                            </div>
                                            <ul class="list-unstyled text-muted fs-7 mb-0">
                                                <li class="mb-1">✅ Preâmbulo: "Indico ao Senhor Prefeito:"</li>
                                                <li class="mb-1">✅ Lista com letras (a, b, c)</li>
                                                <li class="mb-1">✅ Sugestões ao Executivo</li>
                                                <li class="mb-1">✅ Formatação adequada</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-10">
                            <h4 class="text-gray-900 fw-bold fs-5 mb-4">
                                <i class="ki-duotone ki-code fs-3 text-info me-2">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                    <span class="path3"></span>
                                    <span class="path4"></span>
                                </i>
                                Variáveis Inteligentes (29 disponíveis)
                            </h4>
                            
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-4">
                                        <div class="fw-semibold text-gray-800 mb-2">🏛️ Dados da Proposição</div>
                                        <ul class="list-unstyled fs-7">
                                            <li><code class="text-primary">${tipo_proposicao}</code></li>
                                            <li><code class="text-primary">${numero_proposicao}</code></li>
                                            <li><code class="text-primary">${ementa}</code></li>
                                            <li><code class="text-primary">${texto}</code></li>
                                            <li><code class="text-primary">${justificativa}</code></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-4">
                                        <div class="fw-semibold text-gray-800 mb-2">👤 Dados do Autor</div>
                                        <ul class="list-unstyled fs-7">
                                            <li><code class="text-success">${autor_nome}</code></li>
                                            <li><code class="text-success">${autor_cargo}</code></li>
                                            <li><code class="text-success">${autor_partido}</code></li>
                                        </ul>
                                    </div>
                                    <div class="mb-4">
                                        <div class="fw-semibold text-gray-800 mb-2">📅 Datas</div>
                                        <ul class="list-unstyled fs-7">
                                            <li><code class="text-info">${data_atual}</code></li>
                                            <li><code class="text-info">${mes_extenso}</code></li>
                                            <li><code class="text-info">${ano_atual}</code></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-4">
                                        <div class="fw-semibold text-gray-800 mb-2">🏢 Dados da Câmara</div>
                                        <ul class="list-unstyled fs-7">
                                            <li><code class="text-warning">${nome_camara}</code></li>
                                            <li><code class="text-warning">${endereco_camara}</code></li>
                                            <li><code class="text-warning">${telefone_camara}</code></li>
                                            <li><code class="text-warning">${municipio}</code></li>
                                        </ul>
                                    </div>
                                    <div class="mb-4">
                                        <div class="fw-semibold text-gray-800 mb-2">🤖 Dinâmicas</div>
                                        <ul class="list-unstyled fs-7">
                                            <li><code class="text-danger">${preambulo_dinamico}</code></li>
                                            <li><code class="text-danger">${clausula_vigencia}</code></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-10">
                            <h4 class="text-gray-900 fw-bold fs-5 mb-4">
                                <i class="ki-duotone ki-gear fs-3 text-dark me-2">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                </i>
                                Como Usar o Sistema
                            </h4>
                            
                            <div class="timeline timeline-border-dashed">
                                <div class="timeline-item">
                                    <div class="timeline-line w-40px"></div>
                                    <div class="timeline-icon symbol symbol-circle symbol-40px">
                                        <div class="symbol-label bg-light-primary">
                                            <span class="text-primary fw-bold fs-8">1</span>
                                        </div>
                                    </div>
                                    <div class="timeline-content mb-10 mt-n1">
                                        <div class="mb-5 pe-3">
                                            <div class="fs-6 fw-semibold text-gray-700 mb-2">Acesse o Editor</div>
                                            <div class="text-gray-500">Clique em "Editar Template Universal" para abrir o OnlyOffice</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-line w-40px"></div>
                                    <div class="timeline-icon symbol symbol-circle symbol-40px">
                                        <div class="symbol-label bg-light-success">
                                            <span class="text-success fw-bold fs-8">2</span>
                                        </div>
                                    </div>
                                    <div class="timeline-content mb-10 mt-n1">
                                        <div class="mb-5 pe-3">
                                            <div class="fs-6 fw-semibold text-gray-700 mb-2">Personalize o Conteúdo</div>
                                            <div class="text-gray-500">Edite seções, adicione variáveis e ajuste a formatação</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-line w-40px"></div>
                                    <div class="timeline-icon symbol symbol-circle symbol-40px">
                                        <div class="symbol-label bg-light-info">
                                            <span class="text-info fw-bold fs-8">3</span>
                                        </div>
                                    </div>
                                    <div class="timeline-content mb-10 mt-n1">
                                        <div class="mb-5 pe-3">
                                            <div class="fs-6 fw-semibold text-gray-700 mb-2">Teste a Adaptação</div>
                                            <div class="text-gray-500">Use a ferramenta de teste para ver como se adapta a diferentes tipos</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-icon symbol symbol-circle symbol-40px">
                                        <div class="symbol-label bg-light-warning">
                                            <span class="text-warning fw-bold fs-8">4</span>
                                        </div>
                                    </div>
                                    <div class="timeline-content mt-n1">
                                        <div class="mb-5 pe-3">
                                            <div class="fs-6 fw-semibold text-gray-700 mb-2">Ativação Automática</div>
                                            <div class="text-gray-500">Sistema aplica automaticamente nas novas proposições</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-success">
                            <div class="d-flex align-items-center">
                                <i class="ki-duotone ki-shield-tick fs-2 text-success me-3">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                    <span class="path3"></span>
                                </i>
                                <div>
                                    <div class="fw-semibold">Resultado Final</div>
                                    <div class="fs-7 text-muted">
                                        Um sistema de templates modernizado, eficiente e que mantém total conformidade 
                                        com os padrões legais LC 95/1998.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Fechar</button>
                @if($templateUniversal ?? false)
                    <a href="{{ route('admin.templates.universal.editor', $templateUniversal) }}" class="btn btn-primary">
                        <i class="ki-duotone ki-pencil fs-6 me-1">
                            <span class="path1"></span>
                            <span class="path2"></span>
                        </i>
                        Começar Agora
                    </a>
                @endif
            </div>
        </div>
    </div>
</div>
<!--end::Modal - Como Usar Templates-->

<!--begin::Modal - Visualizar Variáveis-->
<div class="modal fade" id="kt_modal_variables" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered mw-800px">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="fw-bold">Variáveis do Template Universal</h2>
                <div class="btn btn-icon btn-sm btn-active-icon-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body py-10 px-lg-17">
                <div class="row">
                    <div class="col-12">
                        <div class="mb-8">
                            <div class="notice d-flex bg-light-info rounded border-info border border-dashed p-4">
                                <i class="ki-duotone ki-information-5 fs-2 text-info me-4">
                                    <span class="path1"></span>
                                    <span class="path2"></span>
                                    <span class="path3"></span>
                                </i>
                                <div class="d-flex flex-stack flex-grow-1">
                                    <div class="fw-semibold">
                                        <div class="fs-6 text-gray-700">Sistema Inteligente</div>
                                        <div class="fs-7 text-muted">
                                            Estas variáveis se adaptam automaticamente conforme o tipo de proposição selecionado.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row g-5">
                            <div class="col-md-6">
                                <div class="card border border-dashed border-primary">
                                    <div class="card-header bg-light-primary">
                                        <h3 class="card-title text-primary">
                                            <i class="ki-duotone ki-document fs-3 me-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                            Proposição
                                        </h3>
                                    </div>
                                    <div class="card-body p-4">
                                        <div class="mb-3">
                                            <code class="text-primary fs-6">${tipo_proposicao}</code>
                                            <div class="text-muted fs-8 mt-1">Adapta-se automaticamente (MOÇÃO, PROJETO DE LEI, etc.)</div>
                                        </div>
                                        <div class="mb-3">
                                            <code class="text-primary fs-6">${numero_proposicao}</code>
                                            <div class="text-muted fs-8 mt-1">Numeração oficial ou [AGUARDANDO PROTOCOLO]</div>
                                        </div>
                                        <div class="mb-3">
                                            <code class="text-primary fs-6">${ementa}</code>
                                            <div class="text-muted fs-8 mt-1">Ementa da proposição</div>
                                        </div>
                                        <div class="mb-3">
                                            <code class="text-primary fs-6">${texto}</code>
                                            <div class="text-muted fs-8 mt-1">Conteúdo principal</div>
                                        </div>
                                        <div class="mb-0">
                                            <code class="text-primary fs-6">${justificativa}</code>
                                            <div class="text-muted fs-8 mt-1">Justificativa (quando presente)</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card border border-dashed border-success">
                                    <div class="card-header bg-light-success">
                                        <h3 class="card-title text-success">
                                            <i class="ki-duotone ki-profile-user fs-3 me-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                                <span class="path3"></span>
                                                <span class="path4"></span>
                                            </i>
                                            Autor
                                        </h3>
                                    </div>
                                    <div class="card-body p-4">
                                        <div class="mb-3">
                                            <code class="text-success fs-6">${autor_nome}</code>
                                            <div class="text-muted fs-8 mt-1">Nome do parlamentar autor</div>
                                        </div>
                                        <div class="mb-3">
                                            <code class="text-success fs-6">${autor_cargo}</code>
                                            <div class="text-muted fs-8 mt-1">Vereador (padrão)</div>
                                        </div>
                                        <div class="mb-0">
                                            <code class="text-success fs-6">${autor_partido}</code>
                                            <div class="text-muted fs-8 mt-1">Partido político</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card border border-dashed border-info mt-4">
                                    <div class="card-header bg-light-info">
                                        <h3 class="card-title text-info">
                                            <i class="ki-duotone ki-calendar fs-3 me-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                            Datas
                                        </h3>
                                    </div>
                                    <div class="card-body p-4">
                                        <div class="mb-3">
                                            <code class="text-info fs-6">${data_atual}</code>
                                            <div class="text-muted fs-8 mt-1">Data atual (dd/mm/aaaa)</div>
                                        </div>
                                        <div class="mb-3">
                                            <code class="text-info fs-6">${mes_extenso}</code>
                                            <div class="text-muted fs-8 mt-1">Mês por extenso</div>
                                        </div>
                                        <div class="mb-0">
                                            <code class="text-info fs-6">${ano_atual}</code>
                                            <div class="text-muted fs-8 mt-1">Ano atual</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card border border-dashed border-warning">
                                    <div class="card-header bg-light-warning">
                                        <h3 class="card-title text-warning">
                                            <i class="ki-duotone ki-home fs-3 me-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                            Câmara
                                        </h3>
                                    </div>
                                    <div class="card-body p-4">
                                        <div class="mb-3">
                                            <code class="text-warning fs-6">${nome_camara}</code>
                                            <div class="text-muted fs-8 mt-1">Nome oficial da câmara</div>
                                        </div>
                                        <div class="mb-3">
                                            <code class="text-warning fs-6">${endereco_camara}</code>
                                            <div class="text-muted fs-8 mt-1">Endereço completo</div>
                                        </div>
                                        <div class="mb-3">
                                            <code class="text-warning fs-6">${telefone_camara}</code>
                                            <div class="text-muted fs-8 mt-1">Telefone principal</div>
                                        </div>
                                        <div class="mb-0">
                                            <code class="text-warning fs-6">${municipio}</code>
                                            <div class="text-muted fs-8 mt-1">Nome do município</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card border border-dashed border-danger">
                                    <div class="card-header bg-light-danger">
                                        <h3 class="card-title text-danger">
                                            <i class="ki-duotone ki-setting-2 fs-3 me-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                            Dinâmicas
                                        </h3>
                                    </div>
                                    <div class="card-body p-4">
                                        <div class="mb-3">
                                            <code class="text-danger fs-6">${preambulo_dinamico}</code>
                                            <div class="text-muted fs-8 mt-1">Muda conforme o tipo (ex: "A CÂMARA DECRETA:")</div>
                                        </div>
                                        <div class="mb-3">
                                            <code class="text-danger fs-6">${clausula_vigencia}</code>
                                            <div class="text-muted fs-8 mt-1">Cláusula de vigência apropriada</div>
                                        </div>
                                        <div class="mb-0">
                                            <code class="text-danger fs-6">${categoria_tipo}</code>
                                            <div class="text-muted fs-8 mt-1">Categoria do tipo de proposição</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card border border-dashed border-secondary mt-4">
                                    <div class="card-header bg-light-secondary">
                                        <h3 class="card-title text-secondary">
                                            <i class="ki-duotone ki-picture fs-3 me-2">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                            Formatação
                                        </h3>
                                    </div>
                                    <div class="card-body p-4">
                                        <div class="mb-3">
                                            <code class="text-secondary fs-6">${imagem_cabecalho}</code>
                                            <div class="text-muted fs-8 mt-1">Logo/brasão da câmara</div>
                                        </div>
                                        <div class="mb-0">
                                            <code class="text-secondary fs-6">${assinatura_padrao}</code>
                                            <div class="text-muted fs-8 mt-1">Área de assinatura</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary" onclick="copiarTodasVariaveis()">
                    <i class="ki-duotone ki-copy fs-6 me-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                    Copiar Lista Completa
                </button>
            </div>
        </div>
    </div>
</div>
<!--end::Modal - Visualizar Variáveis-->

<script>
// Função para copiar todas as variáveis
function copiarTodasVariaveis() {
    const variaveis = [
        // Proposição
        '${tipo_proposicao}',
        '${numero_proposicao}',
        '${ementa}',
        '${texto}',
        '${justificativa}',
        '${protocolo}',
        
        // Autor
        '${autor_nome}',
        '${autor_cargo}',
        '${autor_partido}',
        
        // Datas
        '${data_atual}',
        '${data_criacao}',
        '${data_protocolo}',
        '${dia}',
        '${mes}',
        '${ano_atual}',
        '${mes_extenso}',
        
        // Instituição
        '${municipio}',
        '${nome_camara}',
        '${endereco_camara}',
        '${telefone_camara}',
        '${email_camara}',
        '${cnpj_camara}',
        
        // Formatação
        '${imagem_cabecalho}',
        '${assinatura_padrao}',
        '${rodape_texto}',
        
        // Dinâmicas
        '${preambulo_dinamico}',
        '${clausula_vigencia}',
        '${categoria_tipo}',
        
        // Status
        '${status}'
    ];
    
    const textoVariaveis = variaveis.join('\n');
    
    navigator.clipboard.writeText(textoVariaveis).then(function() {
        Swal.fire({
            icon: 'success',
            title: 'Copiado!',
            text: '29 variáveis copiadas para a área de transferência.',
            timer: 2000,
            showConfirmButton: false
        });
    }, function(err) {
        // Fallback para browsers mais antigos
        const textArea = document.createElement('textarea');
        textArea.value = textoVariaveis;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        Swal.fire({
            icon: 'success',
            title: 'Copiado!',
            text: '29 variáveis copiadas para a área de transferência.',
            timer: 2000,
            showConfirmButton: false
        });
    });
}
</script>